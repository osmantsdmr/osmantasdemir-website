---
import '../styles/global.css'
import Navbar from '../components/Navbar.astro'

interface Props {
  title: string;
  description?: string;
  image?: string;
  type?: 'website' | 'article';
  publishedTime?: Date;
  tags?: string[];
}

const { 
  title, 
  description = "Osman Taşdemir - CBS Uzmanı & Otomasyon Geliştiricisi",
  image = "/images/og-default.jpg",
  type = "website",
  publishedTime,
  tags
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site || 'https://osmantsdmr.com');
const imageURL = new URL(image, Astro.site || 'https://osmantsdmr.com');
---

<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="author" content="Osman Taşdemir" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="Osman Taşdemir Blog RSS" href="/rss.xml" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={imageURL} />
    <meta property="og:locale" content="tr_TR" />
    <meta property="og:site_name" content="Osman Taşdemir" />
    
    {publishedTime && (
      <meta property="article:published_time" content={publishedTime.toISOString()} />
    )}
    
    {tags && tags.map(tag => (
      <meta property="article:tag" content={tag} />
    ))}
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={imageURL} />
    
    <title>{title}</title>
  </head>
  <body class="bg-[#1a1a1a] text-[#D3DAD9]">
  <Navbar />
  <slot />
    
    <!-- Başa dön butonu -->
    <button 
      id="scrollToTop" 
      style="position: fixed; bottom: 24px; right: 24px; width: 48px; height: 48px; background: #57564F; color: white; border: none; border-radius: 50%; cursor: pointer; opacity: 0; visibility: hidden; transition: all 0.3s; display: flex; align-items: center; justify-content: center; z-index: 50; box-shadow: 0 4px 12px rgba(0,0,0,0.3);"
      aria-label="Başa dön"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
      </svg>
    </button>
    
    <script is:inline>
      // Başa dön butonu
      const scrollBtn = document.getElementById('scrollToTop');
      
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          scrollBtn.style.opacity = '1';
          scrollBtn.style.visibility = 'visible';
        } else {
          scrollBtn.style.opacity = '0';
          scrollBtn.style.visibility = 'hidden';
        }
      });
      
      scrollBtn?.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      
      scrollBtn?.addEventListener('mouseenter', () => {
        scrollBtn.style.background = '#6a6960';
      });
      
      scrollBtn?.addEventListener('mouseleave', () => {
        scrollBtn.style.background = '#57564F';
      });
    </script>
  </body>
</html>
