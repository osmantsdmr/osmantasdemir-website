---
interface Props {
  pageId: string;
  pageTitle: string;
}

const { pageId, pageTitle } = Astro.props;

// Cusdis App ID - osmantsdmr.com
const CUSDIS_APP_ID = "ab1b00e7-ff01-4287-ac2e-4b8d67c00818"; 
---

<section style="margin-top: 48px; padding-top: 32px; border-top: 1px solid #44444E;">
  <h3 style="font-size: 20px; font-weight: 600; color: #D3DAD9; margin-bottom: 24px; display: flex; align-items: center; gap: 8px;">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
    </svg>
    Yorumlar
  </h3>
  
  <div 
    id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id={CUSDIS_APP_ID}
    data-page-id={pageId}
    data-page-url={Astro.url.href}
    data-page-title={pageTitle}
    data-theme="dark"
  >
  </div>
  
  <!-- Cusdis yüklenmeden önce gösterilecek placeholder -->
  <noscript>
    <p style="color: #57564F; font-style: italic;">Yorumları görmek için JavaScript'i etkinleştirin.</p>
  </noscript>
</section>

<style is:global>
  /* Cusdis tema özelleştirmeleri */
  #cusdis_thread {
    --cusdis-bg-color: #37353E;
    --cusdis-text-color: #D3DAD9;
    --cusdis-border-color: #44444E;
    --cusdis-primary-color: #57564F;
  }
  
  /* Form stilleri */
  #cusdis_thread input,
  #cusdis_thread textarea {
    background: #44444E !important;
    border: 1px solid #57564F !important;
    color: #D3DAD9 !important;
    border-radius: 8px !important;
  }
  
  #cusdis_thread input:focus,
  #cusdis_thread textarea:focus {
    outline: none !important;
    border-color: #6a6960 !important;
  }
  
  #cusdis_thread button {
    background: #57564F !important;
    color: #D3DAD9 !important;
    border: none !important;
    border-radius: 8px !important;
    padding: 10px 20px !important;
    cursor: pointer !important;
    transition: background 0.2s !important;
  }
  
  #cusdis_thread button:hover {
    background: #6a6960 !important;
  }
  
  /* Yorum kartları */
  #cusdis_thread .cusdis-comment {
    background: #44444E !important;
    border-radius: 8px !important;
    padding: 16px !important;
    margin-bottom: 12px !important;
  }
</style>

<script is:inline>
  // Cusdis'i sayfa yüklendiğinde başlat
  window.addEventListener('load', function() {
    if (window.CUSDIS) {
      window.CUSDIS.initial();
    }
  });
</script>

<!-- Cusdis SDK -->
<script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
