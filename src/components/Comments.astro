---
interface Props {
  pageId: string;
  pageTitle: string;
}

const { pageId, pageTitle } = Astro.props;

// Cusdis App ID - osmantsdmr.com
const CUSDIS_APP_ID = "ab1b00e7-ff01-4287-ac2e-4b8d67c00818"; 
---

<section style="margin-top: 48px; padding-top: 32px; border-top: 1px solid #44444E;">
  <h3 style="font-size: 20px; font-weight: 600; color: #D3DAD9; margin-bottom: 24px; display: flex; align-items: center; gap: 10px;">
  <span style="display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; background: linear-gradient(135deg, #3a3a42 0%, #2d2d35 100%); border-radius: 10px; border: 1px solid rgba(87, 86, 79, 0.3);">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
    </svg>
  </span>
  Yorumlar
</h3>
  
  <div 
    id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id={CUSDIS_APP_ID}
    data-page-id={pageId}
    data-page-url={Astro.url.href}
    data-page-title={pageTitle}
    data-theme="dark"
  >
  </div>
  
  <!-- Cusdis yüklenmeden önce gösterilecek placeholder -->
  <noscript>
    <p style="color: #57564F; font-style: italic;">Yorumları görmek için JavaScript'i etkinleştirin.</p>
  </noscript>
</section>

<style is:global>
  /* Cusdis container */
  #cusdis_thread {
    margin-top: 24px;
  }
  
  #cusdis_thread iframe {
    border-radius: 12px !important;
    background: #2d2d35 !important;
  }
  
  /* Form container */
  #cusdis_thread [data-cusdis-host] {
    background: transparent !important;
  }
  
  /* Input ve textarea stilleri */
  #cusdis_thread input,
  #cusdis_thread textarea {
    background: #3a3a42 !important;
    border: 1px solid rgba(87, 86, 79, 0.4) !important;
    color: #D3DAD9 !important;
    border-radius: 10px !important;
    padding: 14px 16px !important;
    font-size: 15px !important;
    transition: all 0.2s ease !important;
  }
  
  #cusdis_thread input::placeholder,
  #cusdis_thread textarea::placeholder {
    color: #6a6a6a !important;
  }
  
  #cusdis_thread input:focus,
  #cusdis_thread textarea:focus {
    outline: none !important;
    border-color: #7c9a5e !important;
    box-shadow: 0 0 0 3px rgba(124, 154, 94, 0.15) !important;
  }
  
  #cusdis_thread textarea {
    min-height: 120px !important;
    resize: vertical !important;
  }
  
  /* Buton stilleri */
  #cusdis_thread button {
    background: linear-gradient(135deg, #7c9a5e 0%, #6a8a4e 100%) !important;
    color: #fff !important;
    border: none !important;
    border-radius: 10px !important;
    padding: 12px 28px !important;
    font-size: 15px !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
  }
  
  #cusdis_thread button:hover {
    background: linear-gradient(135deg, #8baa6e 0%, #7c9a5e 100%) !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(124, 154, 94, 0.3) !important;
  }
  
  /* Label stilleri */
  #cusdis_thread label {
    color: #9a9a9a !important;
    font-size: 13px !important;
    font-weight: 500 !important;
    margin-bottom: 8px !important;
    display: block !important;
  }
  
  /* Yorum kartları */
  #cusdis_thread .cusdis-comment {
    background: #3a3a42 !important;
    border-radius: 12px !important;
    padding: 20px !important;
    margin-bottom: 16px !important;
    border: 1px solid rgba(87, 86, 79, 0.3) !important;
  }
</style>

<script is:inline>
  // Cusdis'i sayfa yüklendiğinde başlat
  window.addEventListener('load', function() {
    if (window.CUSDIS) {
      window.CUSDIS.initial();
    }
  });
</script>

<!-- Cusdis SDK -->
<script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
